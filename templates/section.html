{% extends "base.html" %}

{% import "macros/cards.html" as cards %}
{% import "macros/sections.html" as sections %}

{% block title %}{{ section.title }} | Francisco Sandoval Gómez{% endblock %}

{% block content %}
{% set pages = paginator.pages | default(value=section.pages) %}

{% if section.path is containing("articulos") %}
{# Artículos: Featured article + grid #}
<section class="articulos-page">
    <div class="container">
        {% if pages | length > 0 %}
        {{ cards::article_featured(article=pages | first) }}
        {% endif %}

        {% if pages | length > 1 %}
        <div class="articulos-grid">
            {% for page in pages | slice(start=1) %}
                {{ cards::article_card(article=page) }}
            {% endfor %}
        </div>
        {% endif %}
    </div>
</section>

{% elif section.path is containing("trabajos") %}
{# Trabajos: 2-column grid with large images #}
<section class="trabajos-page">
    <div class="container">
        {{ sections::page_header_styled(title=section.title, description=section.description | default(value="")) }}
        <div class="trabajos-grid">
            {% for page in pages %}
                {{ cards::trabajo_card(trabajo=page) }}
            {% endfor %}
        </div>
    </div>
</section>

{% elif section.path is containing("investigacion") %}
{# Investigación: Horizontal cards with external links #}
<section class="investigacion-page">
    <div class="container">
        {{ sections::page_header_styled(title=section.title, description=section.description | default(value="")) }}
        <div class="investigacion-list">
            {% for page in pages %}
                {{ cards::investigacion_card(item=page) }}
            {% endfor %}
        </div>
    </div>
</section>

{% elif section.path is containing("publicaciones") %}
{# Publicaciones externas: Text-only list #}
<section class="publicaciones-page">
    <div class="container">
        {{ sections::page_header_styled(title=section.title, description=section.description | default(value="")) }}
        <div class="publicaciones-list">
            {% for page in pages %}
                {{ cards::publicacion_card(item=page) }}
            {% endfor %}
        </div>
    </div>
</section>

{% else %}
{# Default: Generic grid #}
{{ sections::page_header(title=section.title, description=section.description | default(value="")) }}
<section class="content-section">
    <div class="container">
        <div class="posts-grid">
            {% for page in pages %}
                {{ cards::post_card(post=page) }}
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

{% if paginator and paginator.number_pagers > 1 %}
<nav class="pagination">
    <div class="container">
        <div class="pagination-inner">
            {% if paginator.previous %}
            <a href="{{ paginator.previous }}" class="pagination-btn pagination-btn--prev">
                <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
                <span>Anterior</span>
            </a>
            {% else %}
            <span class="pagination-btn pagination-btn--prev pagination-btn--disabled">
                <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
                <span>Anterior</span>
            </span>
            {% endif %}

            <span class="pagination-info">
                Página {{ paginator.current_index }} de {{ paginator.number_pagers }}
            </span>

            {% if paginator.next %}
            <a href="{{ paginator.next }}" class="pagination-btn pagination-btn--next">
                <span>Siguiente</span>
                <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
            </a>
            {% else %}
            <span class="pagination-btn pagination-btn--next pagination-btn--disabled">
                <span>Siguiente</span>
                <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
            </span>
            {% endif %}
        </div>
    </div>
</nav>
{% endif %}
{% endblock %}
